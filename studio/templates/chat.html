<!DOCTYPE html>
<html>
<head>
    <title>{{ agent | capitalize }} Chat</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body class="with-bg">
    <button onclick="toggleTheme()" class="theme-toggle">🌓</button>
    <div class="sidebar">
        <a href="/">← Home</a>
        <h2>Chat Agents</h2>
        {% for id, model in models.items() %}
        <a href="/chat/{{ id }}">{{ model.label }}</a>
        {% endfor %}
    </div>
    <button class="sidebar-toggle" onclick="document.body.classList.toggle('collapsed')">☰</button>
    <div class="chat-container">

        {% if response %}
        <div class="message-card user">
            <strong>You:</strong><br>{{ user_input }}
        </div>
        <div class="message-card ai">
            <strong>AI:</strong><br>{{ response }}

            <form method="post" action="/generate-doc">
                <input type="hidden" name="content" value="{{ response }}">
                <button class="floating-word-btn" type="submit" title="Download Word">
                    📄
                </button>
            </form>
        </div>
        {% endif %}

    </div>

    <form method="post" class="input-form">
        <textarea name="user_input" rows="2" placeholder="Send a message..." autofocus required></textarea>
        <button type="submit">➤</button>
    </form>
    <script>
        function toggleTheme() {
            document.body.classList.toggle("dark");
            localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");
        }
        window.onload = () => {
            if (localStorage.getItem("theme") === "dark") {
                document.body.classList.add("dark");
            }
        }
    </script>
</body>
</html>